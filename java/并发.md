# 16章java内存模型
## happen-before
java并发编程实战中的描述我没办法理解，想了很久，觉得应该是下面的意思
 ```
 如果a线程解锁，b线程加锁。
 并且a b线程已经发生这两件事，那么a解锁发生在b加锁之前。
 ```
 ## 初始化安全性
 ```
  1 对于含有final域的对象，初始化安全性可以防止对对象的初始引用被重排序到构造过程之前。
  2 对于通过final域可到达的初始变量的写入操作，将不会与构造过程后的操作一起被重排序。
 ```
 我的理解是：对于第一句话，在构造函数中对于所有域（final域和非final域）的写入操作，都将在初始引用被赋值之前的操作之前。也就是说其他线程一旦得到初始引用后，类内的域都将有在构造函数以内写入的值。
 第二句话是第一句话的补充，final域引用的写入完成之前，域引用的对象已经初始化完成。也就是在获取final引用域时，引用的对象已经初始化完了。
假设有如下类：
```java
class Something{
  private int x;
  private String s;
  public Something(int xx,String ss){
   x=xx;
   s=ss;
 }
}
public class Others{
 private final int x1;
 private int x2;
 private Something one;
 private Something two;
 public Others(){
  x1=1;
  x2=2;
  one=new Something(1,"这是1");
  two=new Something(2,"这是2");
 }
}
```
这是可能的执行流程：

![baidu](images/123.png "百度logo") 
